syntax = "proto3";

package trainiac.view;

message Settings {
  // Settings for the canvas.
  CanvasSettings canvas_settings = 1;

  // Settings for the stations.
  StationSettings station_settings = 2;
}

message CanvasSettings {
  // The length in the number of pixels of a grid unit.
  // The default value is 20. All scalar values below
  // are specified in grid units.
  int32 unit_length = 1;

  // Width of the canvas.
  int32 width = 2;

  // Height of the canvas.
  int32 height = 3;

  // Origin x offset.
  float x_offset = 4;

  // Origin y offset.
  float y_offset = 5;

  // If true, do not show grids.
  bool disable_grid = 6;

  // Grid X offset, must be bewteen 0 and 1. The default
  // value is 0.5.
  float grid_x_offset = 7;

  // Grid Y offset, must be between 0 and 1. The default
  // value is 0.5.
  float grid_y_offset = 8;

  // The class name of the grid component for CSS purposes.
  // The default value is "default-grid".
  string grid_class_name = 9;
}

message StationSettings {
  // The radius of a track in a concourse measured by the
  // number of units. The default value is 0.5.
  float concourse_track_radius = 1;

  float concourse_track_connector_length = 2;

  // Do not use css for this; we need to convert between coordinate systems.
  float concourse_track_stroke_width = 3;

  // default: default-concourse.
  string concourse_class_name = 4;

  float interlocking_track_radius = 5;

  float interlocking_track_connector_length = 6;

  // Do not use css for this; we need to convert between coordinate systems.
  float interlocking_track_stroke_width = 7;

  // default: default-interlocking.
  string interlocking_class_name = 8;

  // default: 2.
  float station_line_curve_radius = 9;

  // default: 0.5
  float station_line_stroke_width = 10;
}

// Configuration of a transit diagram.
message View {
  Settings settings = 1;
  repeated Station stations = 2;
}

enum Direction {
  DIRECTION_UNSPECIFIED = 0;
  SOUTHEAST = 1;
  SOUTH = 2;
  SOUTHWEST = 3;
  WEST = 4;
  NORTHWEST = 5;
  NORTH = 6;
  NORTHEAST = 7;
  EAST = 8;
}

// Configuration of a station.
message Station {
  // Name of the station.
  string name = 1;

  // The class name of the grid component for CSS purposes.
  // The default value is "default-station".
  string class_name = 2;

  message Node {
    // X coordinate of the reference track in the node.
    float x = 1;

    // Y coordinate of the reference track in the node.
    float y = 2;

    // The direction of the node. This value only matters
    // if the node has multiple tracks. The direction is
    // defined such that the tracks are aligned perpendicular to the
    // direction, and the first track in the node (in the case
    // of a multi-concourse node, the first track of the first
    // concourse), is the farthest to the left when looking
    // towards the node's direction.
    //
    // Note this may become a problem when different concourse
    // of a node have different directions; we will deal with
    // that later.
    Direction direction = 3;

    // The index of the track where x and y are coordinates for.
    // Default value is zero.
    int32 reference_track = 4;
  }
  repeated Node nodes = 3;
}
